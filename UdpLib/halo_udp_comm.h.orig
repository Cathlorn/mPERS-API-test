#ifndef HALO_UDP_COMM_H
#define HALO_UDP_COMM_H

#include "../HaloMessage.h"
#include "udp_lib.h"

//Configuration
#define TICKS_PER_REXMIT   10
#define MAX_REXMIT         3
#define TICKS_PER_MIN      5000
#define TICKS_PER_ACK_DROP 2* (TICKS_PER_REXMIT)*(MAX_REXMIT) //should be twice the time it takes to give up sending something


//User Notification
typedef struct
{
  uint8 debug;
  NotifierFunction  msg_tx_sent;
  NotifierFunction  msg_tx_dropped;
  NotifierFunction  msg_rx_received;
}
HaloUdpUserData;

//Operation
void halo_msg_init(uint8 actAsServer, HaloUdpUserData *userData);
int halo_msg_send(const HaloMessage *msg);
//int halo_msg_recv(HaloMessage *msg);
void halo_msg_tick(void);

#endif //HALO_UDP_COMM_H
